{% extends "base.html" %}
{% block content %}
	<div class="row">
		<div class="col-sm-2"></div>
		<div class="col-sm-8">
			<h1>{{ table.name }}</h1>
			<p>{{ table.desc }}</p>
		</div>
		<div class="col-sm-2"></div>
	</div>
	{% if table.rows|length > 0 %}
		<div class="row">
			<div class="col-sm-2"></div>
			<div class="col-sm-8">
				<table class="table table-striped table-bordered" cellspacing="0" width="100%" id="dataTable">
					<thead>
					<tr>
						{% for column in table.columns %}
							<th>
								<div style="float:left">
									{{ column[0] }}
								</div>
								<div style="float:right">
									<button type="button" style="padding:0;border:none;background:none;">&#x2699;
									</button>
								</div>
							</th>
						{% endfor %}
					</tr>
					</thead>
				</table>
				<script type="text/javascript" charset="utf-8">
					$(document).ready(function () {
						var table = $('#dataTable').DataTable({
							"scrollX": "auto",
							"scrollY": "50vh",
							"scrollCollapse": true,
							processing: true,
							serverSide: true,
							ajax: '/api' + window.location.pathname
						});
						$('a.toggle-vis').on('click', function (e) {
							e.preventDefault();
							// Get the column API object
							var column = table.column($(this).attr('data-column'));
							// Toggle the visibility
							column.visible(!column.visible());
						});
					});
				</script>
			</div>
			<div class="col-sm-2"></div>
		</div>
	{% else %}
		<h1>This is empty</h1>
	{% endif %}
	<br>
	<br>
	<br>
{% endblock %}
